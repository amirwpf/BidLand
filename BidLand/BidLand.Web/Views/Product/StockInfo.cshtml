@using App.Domin.Core._01_Purchause.Contracts.Repositories.Dtos;
@using BidLand.Framework.Common;
@model StockRepoDto

<head>
	<style>
		/* Add your custom styles here */
		body {
			background-color: #f8f9fa;
		}

		.container {
			background-color: #ffffff;
			padding: 20px;
			border-radius: 8px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		}

		#productCarousel {
			border: 1px solid #dee2e6;
			border-radius: 8px;
			overflow: hidden;
		}

		.carousel-inner img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.card {
			margin-top: 20px;
			padding: 20px;
			border-radius: 8px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
		}

		.comment-editor {
			border: 1px solid #ccc;
			border-radius: 4px;
			padding: 10px;
		}

		.tool-btn {
			margin-right: 5px;
		}

		.star-rating {
			font-size: 24px;
			color: #ffc107; /* Set the fill color */
			display: inline-block;
		}

			.star-rating::before {
				content: '\2605'; /* Unicode character for a solid star */
			}

			.star-rating.empty::before {
				content: '\2606'; /* Unicode character for an empty star */
				color: #ddd; /* Set the empty star color */
			}
	</style>
</head>
<body>

	<div class="container mt-5">

		<!-- Product Section -->
		<div class="row">
			<div class="col-md-6">
				<div id="productCarousel" class="carousel slide" data-ride="carousel">
					<div class="carousel-inner">
						@if (Model.Product.Images != null)
						{
							@foreach (var img in Model.Product.Images)
							{
								<div class="carousel-item @(img == Model.Product.Images.First() ? "active" : "")">
									<img src="/uploads/products/@img.Url" alt="Product Image" class="d-block w-100" style="width: 300px; height: 500px;">
								</div>
							}
						}
					</div>
					<a class="carousel-control-prev" href="#productCarousel" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#productCarousel" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
			</div>
			<div class="col-md-6 card">
				<h2>@Model.Product.Name</h2>
				<hr />
				<h3>مشخصات کالا</h3>
				<p><strong>قیمت پایه :</strong> @Model.Price تومان</p>
				<p><strong>شرح کالا:</strong> @Model.AdditionalDescription</p>
				<p><strong>تاریخ تولید کالا:</strong> @DateConvertor.ConvertGregorianToPersian(Model.InsertionDate??DateTime.Now)</p>
				<p><strong>درصد رضایت</strong> 80%</p>
				<!-- Stars in a row -->
				<div>
					<div class="star-rating"></div>
					<div class="star-rating"></div>
					<div class="star-rating"></div>
					<div class="star-rating"></div>
					<div class="star-rating empty"></div>
				</div>

				<!-- Add to Cart Section -->
				@if (User.IsInRole("Buyer") == true)
				{
					@if (Model.IsDelete == false && Model.IsActive == true)
					{
						<div class="add-to-cart">
							<label for="quantity">تعداد:</label>
							<input type="number" id="quantity" name="quantity" min="1" max="@Model.AvailableNumber" value="1">
							<button type="button" class="btn btn-primary" id="addToCartButton">افزودن به سبد خرید</button>
						</div>
					}
					else
					{
						<span class='badge bg-warning'>کالا برای فروش موجود نمی باشد</span>
					}
				}
				else
				{
					<span class='badge bg-warning'>لطفا برای خرید کالا وارد حساب کاربری خود شوید </span>
				}
			</div>
		</div>

		<div class="card">

			<h5> ثبت نظر در مورد کالا</h5>
			@if (ViewBag.HasBought)
			{
				<div class="container mt-5">
					<div class="row">
						<div class="col-md-12 mx-auto">

							<!-- Comment Editor -->
							<div class="comment-editor">
								<div class="form-group">
									<label for="commentTitle">عنوان نظر</label>
									<input type="text" class="form-control" id="commentTitle"></input>
									<label for="commentPros">مزایا</label>
									<input type="text" class="form-control" id="commentPros"></input>
									<label for="commentCons">معایب</label>
									<input type="text" class="form-control" id="commentCons"></input>
									<label for="commentIsPos">به دیگران توصیه می کنید</label>
									<input type="checkbox" class="form-control" id="commentIsPos"></input>
									<label for="commentDesc">شرح نظر</label>
									<textarea class="form-control" rows="5" id="commentDesc" placeholder="نظر خود را درج نمایید..."></textarea>
								</div>
								<div class="text-right">
									<!-- Add more tools as needed -->
									<button type="button" class="btn btn-primary" id="PostComment">ارسال نظر</button>
								</div>
							</div>

						</div>
					</div>
				</div>
			}
			else
			{
				<hr/>
				<p class="badge badge-warning"> برای ثبت نظر درباره ی این محصول باید قبلا آن را خریداری نموده باشید. </p>
			}
			
		</div>
	</div>

	<hr />
	<h5 class="text-center mb-4"> نظرات </h5>

	<div class="container mt-5">
		<div class="row">
			<div class="col-md-12">
				@foreach (var cmt in ViewBag.Comments)
				{
					<!-- Comment Card -->
					<div class="card mb-3">
						<div class="card-body">

							<!-- Title -->
							<h5 class="card-title">@cmt.Title</h5>
							<hr />
							نوشته شده توسط :
							<span class="card-title">@cmt.Buyer.User.GetFullName()</span>
							| در تاریخ :
							<span>@DateConvertor.ConvertGregorianToPersian(cmt.ConfirmDate??DateTime.Now)</span>

							<hr />
							<!-- Advantages Section -->
							<div class="mb-3">
								<h6 class="font-weight-bold">مزایا</h6>
								<ul>
									<li>@cmt.Advantages</li>
								</ul>
							</div>

							<hr />
							<!-- Disadvantages Section -->
							<div class="mb-3">
								<h6 class="font-weight-bold">معایب</h6>
								<ul>
									<li>@cmt.DisAdvantages</li>
								</ul>
							</div>
							<hr />
							<!-- Positive/Negative Section -->
							<div class="mb-3">
								<h6 class="font-weight-bold">نظر کلی</h6>
								@if (@cmt.IsPositive == true)
								{
									<div class="text-success">
										<i class="fas fa-thumbs-up"></i> توصیه می کنم
									</div>
								}
								else
								{
									<div class="text-danger">
										<i class="fas fa-thumbs-down"></i> توصیه نمی کنم
									</div>
								}

								<!-- Use text-danger for negative comments -->
							</div>

							<hr />

							<!-- Comment Description -->
							<div>
								<h6 class="font-weight-bold">شرح نظر</h6>
								<p>@cmt.Description</p>
							</div>

						</div>
					</div>
				}
			</div>
		</div>
	</div>
	</div>

	<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
	<script>
		$(document).ready(function () {
			$("#addToCartButton").on("click", function () {
				var quantity = $("#quantity").val();
				var href = "/buyer/buyer/AddStockToCart?quantity=" +quantity+"&stockId="+@Model.Id;
				window.location.href = href;
			});
		});

		$(document).ready(function () {
			$("#PostComment").on("click", function () {
				var commentTitle = $("#commentTitle").val();
				var commentPros = $("#commentPros").val();
				var commentCons = $("#commentCons").val();
				var commentIsPos = $("#commentIsPos").val();
				var commentDesc = $("#commentDesc").val();
				var href = "/buyer/buyer/AddComment?title=" + commentTitle + "&desc=" + commentDesc + "&pros=" + commentPros + "&cons=" + commentCons + "&isPos=" + commentIsPos +"&stockId=" + @Model.Id;
				window.location.href = href;
			});
		});
	</script>

</body>





















@*<body>

	<div class="container mt-5">

		<!-- Product Section -->
		<div class="row">
			<div class="col-md-6">
				<div id="productCarousel" class="carousel slide" data-ride="carousel">
					<div class="carousel-inner">
						@if (Model.Product.Images != null)
						{
							@foreach (var img in Model.Product.Images)
							{
								<div class="carousel-item @(img == Model.Product.Images.First() ? "active" : "")">
									<img src="/uploads/products/@img.Url" alt="Product Image" class="d-block w-100" style="width: 300px; height: 300px;">
								</div>
							}
						}

					</div>
					<a class="carousel-control-prev" href="#productCarousel" role="button" data-slide="prev">
						<span class="carousel-control-prev-icon" aria-hidden="true"></span>
						<span class="sr-only">Previous</span>
					</a>
					<a class="carousel-control-next" href="#productCarousel" role="button" data-slide="next">
						<span class="carousel-control-next-icon" aria-hidden="true"></span>
						<span class="sr-only">Next</span>
					</a>
				</div>
			</div>
			<div class="col-md-6 card">
				<h2>@Model.Product.Name</h2>
				<hr />
				<h3>مشخصات کالا</h3>
				<p><strong>قیمت پایه :</strong> @Model.Price</p>
				<p><strong>شرح کالا:</strong> @Model.AdditionalDescription</p>
				<p><strong>تاریخ تولید کالا:</strong> @DateConvertor.ConvertGregorianToPersian(Model.InsertionDate??DateTime.Now)</p>
				<p><strong>درصد رضایت</strong> 80%</p>
			</div>
		</div>

		<div class="card">
			<h5> نظر خود را درج کنید </h5>
			<div class="container mt-5">
				<div class="row">
					<div class="col-md-12 mx-auto">

						<!-- Comment Editor -->
						<div class="comment-editor">
							<div class="form-group">
								<textarea class="form-control" rows="5" placeholder="Write your comment..."></textarea>
							</div>
							<div class="text-right">
								<!-- Comment Tools -->
								<button type="button" class="btn btn-light tool-btn"><i class="fas fa-bold"></i></button>
								<button type="button" class="btn btn-light tool-btn"><i class="fas fa-italic"></i></button>
								<button type="button" class="btn btn-light tool-btn"><i class="fas fa-underline"></i></button>
								<!-- Add more tools as needed -->
								<button type="button" class="btn btn-primary">Post Comment</button>
							</div>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>

	<hr/>
	<h5> نظرات </h5>

	<div class="container mt-5">
		<div class="row">
			<div class="col-md-12">
				@foreach (var cmt in ViewBag.Comments)
				{
					<!-- Comment Card -->
					<div class="card mb-3">
						<div class="card-body">

							<!-- Title -->
							<h5 class="card-title">@cmt.Title</h5>
							<hr />
							نوشته شده توسط :
							<span class="card-title">@cmt.Buyer.User.GetFullName()</span>
							| در تاریخ :
							<span>@DateConvertor.ConvertGregorianToPersian(cmt.ConfirmDate??DateTime.Now)</span>

							<hr />
							<!-- Advantages Section -->
							<div class="mb-3">
								<h6 class="font-weight-bold">مزایا</h6>
								<ul>
									<li>@cmt.Advantages</li>
								</ul>
							</div>

							<hr />
							<!-- Disadvantages Section -->
							<div class="mb-3">
								<h6 class="font-weight-bold">معایب</h6>
								<ul>
									<li>@cmt.DisAdvantages</li>
								</ul>
							</div>

							<!-- Positive/Negative Section -->
							<div class="mb-3">
								<h6 class="font-weight-bold">نظر کلی</h6>
								@if (@cmt.IsPositive == true)
								{
									<div class="text-success">
										<i class="fas fa-thumbs-up"></i> توصیه می کنم
									</div>
								}
								else
								{
									<div class="text-danger">
										<i class="fas fa-thumbs-down"></i> توصیه نمی کنم
									</div>
								}

								<!-- Use text-danger for negative comments -->
							</div>


							<hr />

							<!-- Comment Description -->
							<div>
								<h6 class="font-weight-bold">شرح نظر</h6>
								<p>@cmt.Description</p>
							</div>

						</div>
					</div>


				}
			</div>
		</div>
	</div>
	</div>


</body>*@